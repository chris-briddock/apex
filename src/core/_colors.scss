// ============================================================================
// Color Utilities (Text, Background, Border)
// ============================================================================

@use 'sass:color';
@use '../config/settings' as settings;
@use '../mixins/dark-mode' as dark-mode;

@if settings.$enable-colors == true {
  // ============================================================================
  // Gray Colors (CSS Custom Properties for theming)
  // ============================================================================
  $grays: (
    50: var(--color-gray-50),
    100: var(--color-gray-100),
    200: var(--color-gray-200),
    300: var(--color-gray-300),
    400: var(--color-gray-400),
    500: var(--color-gray-500),
    600: var(--color-gray-600),
    700: var(--color-gray-700),
    800: var(--color-gray-800),
    900: var(--color-gray-900),
  );

  // Text colors
  @each $key, $value in $grays {
    .text-gray-#{$key} {
      color: $value;
    }
  }

  // Background colors
  @each $key, $value in $grays {
    .bg-gray-#{$key} {
      background-color: $value;
    }
  }

  // Border colors
  @each $key, $value in $grays {
    .border-gray-#{$key} {
      border-color: $value;
    }
  }

  // ============================================================================
  // Blue Colors
  // ============================================================================
  $blues: (
    50: #eff6ff,
    100: #dbeafe,
    200: #bfdbfe,
    300: #93c5fd,
    400: #60a5fa,
    500: #3b82f6,
    600: #2563eb,
    700: #1d4ed8,
    800: #1e40af,
    900: #1e3a8a,
  );

  @each $key, $value in $blues {
    .text-blue-#{$key} {
      color: $value;
    }
    .bg-blue-#{$key} {
      background-color: $value;
    }
    .border-blue-#{$key} {
      border-color: $value;
    }
  }

  // ============================================================================
  // Green Colors
  // ============================================================================
  $greens: (
    50: #f0fdf4,
    100: #dcfce7,
    200: #bbf7d0,
    300: #86efac,
    400: #4ade80,
    500: #22c55e,
    600: #16a34a,
    700: #15803d,
    800: #166534,
    900: #14532d,
  );

  @each $key, $value in $greens {
    .text-green-#{$key} {
      color: $value;
    }
    .bg-green-#{$key} {
      background-color: $value;
    }
    .border-green-#{$key} {
      border-color: $value;
    }
  }

  // ============================================================================
  // Red Colors
  // ============================================================================
  $reds: (
    50: #fef2f2,
    100: #fee2e2,
    200: #fecaca,
    300: #fca5a5,
    400: #f87171,
    500: #ef4444,
    600: #dc2626,
    700: #b91c1c,
    800: #991b1b,
    900: #7f1d1d,
  );

  @each $key, $value in $reds {
    .text-red-#{$key} {
      color: $value;
    }
    .bg-red-#{$key} {
      background-color: $value;
    }
    .border-red-#{$key} {
      border-color: $value;
    }
  }

  // ============================================================================
  // Yellow Colors
  // ============================================================================
  $yellows: (
    50: #fefce8,
    100: #fef9c3,
    200: #fef08a,
    300: #fde047,
    400: #facc15,
    500: #eab308,
    600: #ca8a04,
    700: #a16207,
    800: #854d0e,
    900: #713f12,
  );

  @each $key, $value in $yellows {
    .text-yellow-#{$key} {
      color: $value;
    }
    .bg-yellow-#{$key} {
      background-color: $value;
    }
    .border-yellow-#{$key} {
      border-color: $value;
    }
  }

  // ============================================================================
  // Purple Colors
  // ============================================================================
  $purples: (
    50: #faf5ff,
    100: #f3e8ff,
    200: #e9d5ff,
    300: #d8b4fe,
    400: #c084fc,
    500: #a855f7,
    600: #9333ea,
    700: #7c3aed,
    800: #6b21a8,
    900: #581c87,
  );

  @each $key, $value in $purples {
    .text-purple-#{$key} {
      color: $value;
    }
    .bg-purple-#{$key} {
      background-color: $value;
    }
    .border-purple-#{$key} {
      border-color: $value;
    }
  }

  // ============================================================================
  // White and Black
  // ============================================================================
  .text-white { color: #fff; }
  .text-black { color: #000; }
  .bg-white { background-color: #fff; }
  .bg-black { background-color: #000; }
  .bg-transparent { background-color: transparent; }

  // ============================================================================
  // Opacity Variants (for backgrounds)
  // ============================================================================
  $opacity-values: (
    0: 0,
    5: 0.05,
    10: 0.1,
    15: 0.15,
    20: 0.2,
    25: 0.25,
    30: 0.3,
    35: 0.35,
    40: 0.4,
    45: 0.45,
    50: 0.5,
    55: 0.55,
    60: 0.6,
    65: 0.65,
    70: 0.7,
    75: 0.75,
    80: 0.8,
    85: 0.85,
    90: 0.9,
    95: 0.95,
    100: 1
  );

  // Gray hex values for fractional opacity
  $grays-hex: (
    50: #f9fafb,
    100: #f3f4f6,
    200: #e5e7eb,
    300: #d1d5db,
    400: #9ca3af,
    500: #6b7280,
    600: #4b5563,
    700: #374151,
    800: #1f2937,
    900: #111827,
  );

  // Light mode opacity backgrounds
  @each $shade, $color in $grays-hex {
    @each $opacity-name, $opacity-value in $opacity-values {
      @if $opacity-value < 1 {
        .bg-gray-#{$shade}\/#{$opacity-name} {
          background-color: rgba(
            color.channel($color, "red", $space: rgb),
            color.channel($color, "green", $space: rgb),
            color.channel($color, "blue", $space: rgb),
            $opacity-value
          );
        }
      }
    }
  }

  // White and black opacity backgrounds
  @each $opacity-name, $opacity-value in $opacity-values {
    @if $opacity-value < 1 {
      .bg-white\/#{$opacity-name} {
        background-color: rgba(255, 255, 255, $opacity-value);
      }
      .bg-black\/#{$opacity-name} {
        background-color: rgba(0, 0, 0, $opacity-value);
      }
    }
  }

  // ============================================================================
  // AUTOMATIC DARK MODE UTILITIES
  // ============================================================================
  // These utilities automatically respond to:
  // 1. System preference (prefers-color-scheme: dark)
  // 2. Manual .dark class toggle
  // ============================================================================
  @if settings.$enable-dark-mode == true {

    // ============================================================================
    // Dark Mode Gray Colors (using CSS custom properties)
    // ============================================================================
    $dark-grays-hex: (
      50: #1f2937,
      100: #374151,
      200: #4b5563,
      300: #6b7280,
      400: #9ca3af,
      500: #d1d5db,
      600: #e5e7eb,
      700: #f3f4f6,
      800: #f9fafb,
      900: #ffffff,
    );

    // Dark mode text colors (gray scale)
    @each $key, $dark-value in $dark-grays-hex {
      // Dark mode via media query (system preference)
      @media (prefers-color-scheme: dark) {
        .dark\:text-gray-#{$key} {
          color: $dark-value;
        }
      }
      // Dark mode via .dark class (manual toggle)
      .dark .dark\:text-gray-#{$key},
      .dark\:text-gray-#{$key}.dark {
        color: $dark-value;
      }
    }

    // Dark mode background colors (gray scale)
    @each $key, $dark-value in $dark-grays-hex {
      @media (prefers-color-scheme: dark) {
        .dark\:bg-gray-#{$key} {
          background-color: $dark-value;
        }
      }
      .dark .dark\:bg-gray-#{$key},
      .dark\:bg-gray-#{$key}.dark {
        background-color: $dark-value;
      }
    }

    // Dark mode border colors (gray scale)
    @each $key, $dark-value in $dark-grays-hex {
      @media (prefers-color-scheme: dark) {
        .dark\:border-gray-#{$key} {
          border-color: $dark-value;
        }
      }
      .dark .dark\:border-gray-#{$key},
      .dark\:border-gray-#{$key}.dark {
        border-color: $dark-value;
      }
    }

    // Dark mode white/black
    @media (prefers-color-scheme: dark) {
      .dark\:text-white { color: #111827; }
      .dark\:text-black { color: #fff; }
      .dark\:bg-white { background-color: #111827; }
      .dark\:bg-black { background-color: #fff; }
    }
    .dark .dark\:text-white,
    .dark\:text-white.dark { color: #111827; }
    .dark .dark\:text-black,
    .dark\:text-black.dark { color: #fff; }
    .dark .dark\:bg-white,
    .dark\:bg-white.dark { background-color: #111827; }
    .dark .dark\:bg-black,
    .dark\:bg-black.dark { background-color: #fff; }

    // ============================================================================
    // Dark Mode Opacity Variants (for backgrounds)
    // ============================================================================
    @each $shade, $dark-color in $dark-grays-hex {
      @each $opacity-name, $opacity-value in $opacity-values {
        @if $opacity-value < 1 {
          @media (prefers-color-scheme: dark) {
            .dark\:bg-gray-#{$shade}\/#{$opacity-name} {
              background-color: rgba(
                color.channel($dark-color, "red", $space: rgb),
                color.channel($dark-color, "green", $space: rgb),
                color.channel($dark-color, "blue", $space: rgb),
                $opacity-value
              );
            }
          }
          .dark .dark\:bg-gray-#{$shade}\/#{$opacity-name},
          .dark\:bg-gray-#{$shade}\/#{$opacity-name}.dark {
            background-color: rgba(
              color.channel($dark-color, "red", $space: rgb),
              color.channel($dark-color, "green", $space: rgb),
              color.channel($dark-color, "blue", $space: rgb),
              $opacity-value
            );
          }
        }
      }
    }

    // ============================================================================
    // Dark Mode Hover States
    // ============================================================================
    @each $shade, $dark-color in $dark-grays-hex {
      // Base hover state
      .dark\:hover\:bg-gray-#{$shade}:hover {
        background-color: $dark-color;
      }
      // Media query hover
      @media (prefers-color-scheme: dark) {
        .dark\:hover\:bg-gray-#{$shade}:hover {
          background-color: $dark-color;
        }
      }
      // .dark class hover
      .dark .dark\:hover\:bg-gray-#{$shade}:hover,
      .dark\:hover\:bg-gray-#{$shade}.dark:hover {
        background-color: $dark-color;
      }

      // Opacity hover variants
      @each $opacity-name, $opacity-value in $opacity-values {
        @if $opacity-value < 1 {
          .dark\:hover\:bg-gray-#{$shade}\/#{$opacity-name}:hover {
            background-color: rgba(
              color.channel($dark-color, "red", $space: rgb),
              color.channel($dark-color, "green", $space: rgb),
              color.channel($dark-color, "blue", $space: rgb),
              $opacity-value
            );
          }
          @media (prefers-color-scheme: dark) {
            .dark\:hover\:bg-gray-#{$shade}\/#{$opacity-name}:hover {
              background-color: rgba(
                color.channel($dark-color, "red", $space: rgb),
                color.channel($dark-color, "green", $space: rgb),
                color.channel($dark-color, "blue", $space: rgb),
                $opacity-value
              );
            }
          }
          .dark .dark\:hover\:bg-gray-#{$shade}\/#{$opacity-name}:hover,
          .dark\:hover\:bg-gray-#{$shade}\/#{$opacity-name}.dark:hover {
            background-color: rgba(
              color.channel($dark-color, "red", $space: rgb),
              color.channel($dark-color, "green", $space: rgb),
              color.channel($dark-color, "blue", $space: rgb),
              $opacity-value
            );
          }
        }
      }
    }

    // ============================================================================
    // Dark Mode Color Scales (Blue, Green, Red, Yellow, Purple)
    // Text colors get lightened, backgrounds get darkened
    // ============================================================================

    // Blue colors in dark mode
    @each $key, $value in $blues {
      $dark-text: color.scale($value, $lightness: 10%);
      $dark-bg: color.scale($value, $lightness: -20%);

      @media (prefers-color-scheme: dark) {
        .dark\:text-blue-#{$key} { color: $dark-text; }
        .dark\:bg-blue-#{$key} { background-color: $dark-bg; }
      }
      .dark .dark\:text-blue-#{$key},
      .dark\:text-blue-#{$key}.dark { color: $dark-text; }
      .dark .dark\:bg-blue-#{$key},
      .dark\:bg-blue-#{$key}.dark { background-color: $dark-bg; }
    }

    // Green colors in dark mode
    @each $key, $value in $greens {
      $dark-text: color.scale($value, $lightness: 10%);
      $dark-bg: color.scale($value, $lightness: -20%);

      @media (prefers-color-scheme: dark) {
        .dark\:text-green-#{$key} { color: $dark-text; }
        .dark\:bg-green-#{$key} { background-color: $dark-bg; }
      }
      .dark .dark\:text-green-#{$key},
      .dark\:text-green-#{$key}.dark { color: $dark-text; }
      .dark .dark\:bg-green-#{$key},
      .dark\:bg-green-#{$key}.dark { background-color: $dark-bg; }
    }

    // Red colors in dark mode
    @each $key, $value in $reds {
      $dark-text: color.scale($value, $lightness: 10%);
      $dark-bg: color.scale($value, $lightness: -20%);

      @media (prefers-color-scheme: dark) {
        .dark\:text-red-#{$key} { color: $dark-text; }
        .dark\:bg-red-#{$key} { background-color: $dark-bg; }
      }
      .dark .dark\:text-red-#{$key},
      .dark\:text-red-#{$key}.dark { color: $dark-text; }
      .dark .dark\:bg-red-#{$key},
      .dark\:bg-red-#{$key}.dark { background-color: $dark-bg; }
    }

    // Yellow colors in dark mode
    @each $key, $value in $yellows {
      $dark-text: color.scale($value, $lightness: 10%);
      $dark-bg: color.scale($value, $lightness: -20%);

      @media (prefers-color-scheme: dark) {
        .dark\:text-yellow-#{$key} { color: $dark-text; }
        .dark\:bg-yellow-#{$key} { background-color: $dark-bg; }
      }
      .dark .dark\:text-yellow-#{$key},
      .dark\:text-yellow-#{$key}.dark { color: $dark-text; }
      .dark .dark\:bg-yellow-#{$key},
      .dark\:bg-yellow-#{$key}.dark { background-color: $dark-bg; }
    }

    // Purple colors in dark mode
    @each $key, $value in $purples {
      $dark-text: color.scale($value, $lightness: 10%);
      $dark-bg: color.scale($value, $lightness: -20%);

      @media (prefers-color-scheme: dark) {
        .dark\:text-purple-#{$key} { color: $dark-text; }
        .dark\:bg-purple-#{$key} { background-color: $dark-bg; }
      }
      .dark .dark\:text-purple-#{$key},
      .dark\:text-purple-#{$key}.dark { color: $dark-text; }
      .dark .dark\:bg-purple-#{$key},
      .dark\:bg-purple-#{$key}.dark { background-color: $dark-bg; }
    }
  }
}
