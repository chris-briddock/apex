// ============================================================================
// Dark Mode Theme (CSS Custom Properties)
// ============================================================================
// This file provides dark mode theming via CSS custom properties.
// All colors are overridden in dark mode using CSS variables.

@use '../config/custom-config' as settings;
@use '../mixins/dark-mode' as dm;

@if settings.$enable-dark-mode == true {
  // ============================================================================
  // CSS Custom Properties - Automatic Dark Mode (System Preference)
  // ============================================================================
  @media (prefers-color-scheme: dark) {
    :root {
      // Semantic Colors
      --color-primary: #60a5fa;
      --color-primary-light: #93c5fd;
      --color-primary-dark: #3b82f6;
      --color-secondary: #94a3b8;
      --color-secondary-light: #cbd5e1;
      --color-secondary-dark: #64748b;
      --color-success: #4ade80;
      --color-success-light: #86efac;
      --color-success-dark: #22c55e;
      --color-danger: #f87171;
      --color-danger-light: #fca5a5;
      --color-danger-dark: #ef4444;
      --color-warning: #fbbf24;
      --color-warning-light: #fcd34d;
      --color-warning-dark: #f59e0b;
      --color-info: #38bdf8;
      --color-info-light: #7dd3fc;
      --color-info-dark: #0ea5e9;
      --color-light: #f3f4f6;
      --color-dark: #1f2937;
      --color-white: #f3f4f6;
      --color-black: #1f2937;

      // Shadows (adjusted opacity for dark mode)
      --shadow-color: 0 0 0;
      --shadow-sm: 0 1px 2px 0 rgb(var(--shadow-color) / 0.3);
      --shadow-base: 0 1px 3px 0 rgb(var(--shadow-color) / 0.4), 0 1px 2px 0 rgb(var(--shadow-color) / 0.2);
      --shadow-md: 0 4px 6px -1px rgb(var(--shadow-color) / 0.4), 0 2px 4px -1px rgb(var(--shadow-color) / 0.2);
      --shadow-lg: 0 10px 15px -3px rgb(var(--shadow-color) / 0.4), 0 4px 6px -2px rgb(var(--shadow-color) / 0.2);
      --shadow-xl: 0 20px 25px -5px rgb(var(--shadow-color) / 0.4), 0 10px 10px -5px rgb(var(--shadow-color) / 0.2);
      --shadow-2xl: 0 25px 50px -12px rgb(var(--shadow-color) / 0.5);
      --shadow-inner: inset 0 2px 4px 0 rgb(var(--shadow-color) / 0.15);
    }
  }

  // ============================================================================
  // CSS Custom Properties - Manual Dark Mode (data-theme="dark" attribute)
  // ============================================================================
  [data-theme="dark"] {
    // Semantic Colors
    --color-primary: #60a5fa;
    --color-primary-light: #93c5fd;
    --color-primary-dark: #3b82f6;
    --color-secondary: #94a3b8;
    --color-secondary-light: #cbd5e1;
    --color-secondary-dark: #64748b;
    --color-success: #4ade80;
    --color-success-light: #86efac;
    --color-success-dark: #22c55e;
    --color-danger: #f87171;
    --color-danger-light: #fca5a5;
    --color-danger-dark: #ef4444;
    --color-warning: #fbbf24;
    --color-warning-light: #fcd34d;
    --color-warning-dark: #f59e0b;
    --color-info: #38bdf8;
    --color-info-light: #7dd3fc;
    --color-info-dark: #0ea5e9;
    --color-light: #f3f4f6;
    --color-dark: #1f2937;
    --color-white: #f3f4f6;
    --color-black: #1f2937;

    // Shadows (adjusted opacity for dark mode)
    --shadow-color: 0 0 0;
    --shadow-sm: 0 1px 2px 0 rgb(var(--shadow-color) / 0.3);
    --shadow-base: 0 1px 3px 0 rgb(var(--shadow-color) / 0.4), 0 1px 2px 0 rgb(var(--shadow-color) / 0.2);
    --shadow-md: 0 4px 6px -1px rgb(var(--shadow-color) / 0.4), 0 2px 4px -1px rgb(var(--shadow-color) / 0.2);
    --shadow-lg: 0 10px 15px -3px rgb(var(--shadow-color) / 0.4), 0 4px 6px -2px rgb(var(--shadow-color) / 0.2);
    --shadow-xl: 0 20px 25px -5px rgb(var(--shadow-color) / 0.4), 0 10px 10px -5px rgb(var(--shadow-color) / 0.2);
    --shadow-2xl: 0 25px 50px -12px rgb(var(--shadow-color) / 0.5);
    --shadow-inner: inset 0 2px 4px 0 rgb(var(--shadow-color) / 0.15);
  }

  // ============================================================================
  // Dark Mode Utility Classes (using CSS custom properties)
  // ============================================================================

  // Semantic colors - text, background, border
  @include dm.dark-mode {
    // Primary
    .dark\:text-primary { color: var(--color-primary); }
    .dark\:bg-primary { background-color: var(--color-primary); }
    .dark\:border-primary { border-color: var(--color-primary); }

    // Secondary
    .dark\:text-secondary { color: var(--color-secondary); }
    .dark\:bg-secondary { background-color: var(--color-secondary); }
    .dark\:border-secondary { border-color: var(--color-secondary); }

    // Success
    .dark\:text-success { color: var(--color-success); }
    .dark\:bg-success { background-color: var(--color-success); }
    .dark\:border-success { border-color: var(--color-success); }

    // Danger
    .dark\:text-danger { color: var(--color-danger); }
    .dark\:bg-danger { background-color: var(--color-danger); }
    .dark\:border-danger { border-color: var(--color-danger); }

    // Warning
    .dark\:text-warning { color: var(--color-warning); }
    .dark\:bg-warning { background-color: var(--color-warning); }
    .dark\:border-warning { border-color: var(--color-warning); }

    // Info
    .dark\:text-info { color: var(--color-info); }
    .dark\:bg-info { background-color: var(--color-info); }
    .dark\:border-info { border-color: var(--color-info); }

    // Light/Dark/White/Black
    .dark\:text-light { color: var(--color-light); }
    .dark\:bg-light { background-color: var(--color-light); }
    .dark\:border-light { border-color: var(--color-light); }

    .dark\:text-dark { color: var(--color-dark); }
    .dark\:bg-dark { background-color: var(--color-dark); }
    .dark\:border-dark { border-color: var(--color-dark); }

    .dark\:text-white { color: var(--color-white); }
    .dark\:bg-white { background-color: var(--color-white); }
    .dark\:border-white { border-color: var(--color-white); }

    .dark\:text-black { color: var(--color-black); }
    .dark\:bg-black { background-color: var(--color-black); }
    .dark\:border-black { border-color: var(--color-black); }

    // Shadows
    .dark\:shadow-sm { box-shadow: var(--shadow-sm); }
    .dark\:shadow { box-shadow: var(--shadow-base); }
    .dark\:shadow-md { box-shadow: var(--shadow-md); }
    .dark\:shadow-lg { box-shadow: var(--shadow-lg); }
    .dark\:shadow-xl { box-shadow: var(--shadow-xl); }
    .dark\:shadow-2xl { box-shadow: var(--shadow-2xl); }
    .dark\:shadow-none { box-shadow: var(--shadow-none); }
    .dark\:shadow-inner { box-shadow: var(--shadow-inner); }

    // Ring utilities for dark mode
    $ring-widths: (
      0: 0,
      1: 1px,
      2: 2px,
      4: 4px,
      8: 8px
    );

    $dark-ring-colors: (
      primary: #60a5fa,
      secondary: #94a3b8,
      success: #4ade80,
      danger: #f87171,
      warning: #fbbf24,
      info: #38bdf8,
      light: #1f2937,
      dark: #f3f4f6,
      "white": #111827,
      "black": #fff,
      "transparent": transparent,
      gray-50: #1f2937,
      gray-100: #374151,
      gray-200: #4b5563,
      gray-300: #6b7280,
      gray-400: #9ca3af,
      gray-500: #d1d5db,
      gray-600: #e5e7e7,
      gray-700: #f3f4f6,
      gray-800: #f9fafb,
      gray-900: #ffffff,
      blue-500: #60a5fa,
      green-500: #4ade80,
      red-500: #f87171,
      yellow-500: #fbbf24,
      purple-500: #c084fc
    );

    @media (prefers-color-scheme: dark) {
      // Ring widths
      @each $key, $value in $ring-widths {
        .dark\:ring-#{$key} {
          --ring-offset-color: #111827;
          --ring-color: rgba(96, 165, 250, 0.5);
        }
      }
      // Ring offset widths
      @each $key, $value in $ring-widths {
        .dark\:ring-offset-#{$key} {
          --ring-offset-width: #{$value};
          --ring-offset-shadow: 0 0 0 var(--ring-offset-width) var(--ring-offset-color);
        }
      }
      // Ring colors
      @each $key, $value in $dark-ring-colors {
        .dark\:ring-#{$key} {
          --ring-color: #{$value};
        }
      }
      // Ring offset colors
      @each $key, $value in $dark-ring-colors {
        .dark\:ring-offset-#{$key} {
          --ring-offset-color: #{$value};
        }
      }
      // Ring inset
      .dark\:ring-inset { --ring-inset: inset; }
      // Ring opacity
      .dark\:ring-opacity-0 { --ring-opacity: 0; }
      .dark\:ring-opacity-25 { --ring-opacity: 0.25; }
      .dark\:ring-opacity-50 { --ring-opacity: 0.5; }
      .dark\:ring-opacity-75 { --ring-opacity: 0.75; }
      .dark\:ring-opacity-100 { --ring-opacity: 1; }
    }

    [data-theme="dark"] {
      // Ring widths
      @each $key, $value in $ring-widths {
        .dark\:ring-#{$key} {
          --ring-offset-color: #111827;
          --ring-color: rgba(96, 165, 250, 0.5);
        }
      }
      // Ring offset widths
      @each $key, $value in $ring-widths {
        .dark\:ring-offset-#{$key} {
          --ring-offset-width: #{$value};
          --ring-offset-shadow: 0 0 0 var(--ring-offset-width) var(--ring-offset-color);
        }
      }
      // Ring colors
      @each $key, $value in $dark-ring-colors {
        .dark\:ring-#{$key} {
          --ring-color: #{$value};
        }
      }
      // Ring offset colors
      @each $key, $value in $dark-ring-colors {
        .dark\:ring-offset-#{$key} {
          --ring-offset-color: #{$value};
        }
      }
      // Ring inset
      .dark\:ring-inset { --ring-inset: inset; }
      // Ring opacity
      .dark\:ring-opacity-0 { --ring-opacity: 0; }
      .dark\:ring-opacity-25 { --ring-opacity: 0.25; }
      .dark\:ring-opacity-50 { --ring-opacity: 0.5; }
      .dark\:ring-opacity-75 { --ring-opacity: 0.75; }
      .dark\:ring-opacity-100 { --ring-opacity: 1; }
    }

  }

  // ============================================================================
  // Gray Color Scale (50-900)
  // ============================================================================
  @include dm.dark-mode {
    @each $shade in (50, 100, 200, 300, 400, 500, 600, 700, 800, 900) {
      .dark\:text-gray-#{$shade} { color: var(--color-gray-#{$shade}); }
      .dark\:bg-gray-#{$shade} { background-color: var(--color-gray-#{$shade}); }
      .dark\:border-gray-#{$shade} { border-color: var(--color-gray-#{$shade}); }
    }
  }

  // ============================================================================
  // Extended Color Scales (Blue, Green, Red, Yellow, Purple)
  // ============================================================================
  @media (prefers-color-scheme: dark) {
    @each $color-family in ('blue', 'green', 'red', 'yellow', 'purple') {
      @each $key in (50, 100, 200, 300, 400, 500, 600, 700, 800, 900) {
        .dark\:text-#{$color-family}-#{$key} { color: var(--color-#{$color-family}-#{$key}); }
        .dark\:bg-#{$color-family}-#{$key} { background-color: var(--color-#{$color-family}-#{$key}); }
        .dark\:border-#{$color-family}-#{$key} { border-color: var(--color-#{$color-family}-#{$key}); }
      }
    }
  }

  // Manual dark mode
  @each $color-family in ('blue', 'green', 'red', 'yellow', 'purple') {
    @include dm.dark-mode {
      @each $key in (50, 100, 200, 300, 400, 500, 600, 700, 800, 900) {
        .dark\:text-#{$color-family}-#{$key} { color: var(--color-#{$color-family}-#{$key}); }
        .dark\:bg-#{$color-family}-#{$key} { background-color: var(--color-#{$color-family}-#{$key}); }
        .dark\:border-#{$color-family}-#{$key} { border-color: var(--color-#{$color-family}-#{$key}); }
      }
    }
  }

  // ============================================================================
  // Dark Mode Opacity Variants
  // ============================================================================
  @if settings.$enable-color-modifiers == true {
    @media (prefers-color-scheme: dark) {
      @each $opacity-name in (0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95) {
        // Semantic color opacity variants
        $semantic-colors: ('primary', 'secondary', 'success', 'danger', 'warning', 'info', 'white', 'black');

        @each $color in $semantic-colors {
          .dark\:bg-#{$color}[op#{$opacity-name}] {
            background-color: color-mix(in srgb, var(--color-#{$color}) #{$opacity-name * 1%}, transparent);
          }
        }

        // Gray opacity variants
        @each $shade in (50, 100, 200, 300, 400, 500, 600, 700, 800, 900) {
          .dark\:bg-gray-#{$shade}[op#{$opacity-name}] {
            background-color: color-mix(in srgb, var(--color-gray-#{$shade}) #{$opacity-name * 1%}, transparent);
          }
        }
      }
    }

    @each $opacity-name in (0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95) {
      @include dm.dark-mode {
        // Semantic color opacity variants
        $semantic-colors: ('primary', 'secondary', 'success', 'danger', 'warning', 'info', 'white', 'black');

        @each $color in $semantic-colors {
          .dark\:bg-#{$color}[op#{$opacity-name}] {
            background-color: color-mix(in srgb, var(--color-#{$color}) #{$opacity-name * 1%}, transparent);
          }
        }

        // Gray opacity variants
        @each $shade in (50, 100, 200, 300, 400, 500, 600, 700, 800, 900) {
          .dark\:bg-gray-#{$shade}[op#{$opacity-name}] {
            background-color: color-mix(in srgb, var(--color-gray-#{$shade}) #{$opacity-name * 1%}, transparent);
          }
        }
      }
    }
  }
}
