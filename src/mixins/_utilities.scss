// ============================================================================
// Utility Generation Mixins (CSS Custom Properties)
// ============================================================================
// These mixins generate utility classes using CSS custom properties
// for runtime customization and theming support.

@use 'sass:list';
@use 'sass:map';
@use 'sass:string';
@use '../config/custom-config' as settings;

// ============================================================================
// Generate utilities from a CSS variable map
// ============================================================================
// This mixin creates utility classes that reference CSS custom properties
// instead of hardcoded values, enabling runtime theming.
// Usage:
//   @include generate-from-css-vars('text', 'font-size', (
//     sm: '--font-size-sm',
//     base: '--font-size-base'
//   ));
// Output:
//   .text-sm { font-size: var(--font-size-sm); }
//   .text-base { font-size: var(--font-size-base); }

@mixin generate-from-css-vars($class-name, $property, $var-map, $prefix: '') {
  @each $name, $var-name in $var-map {
    .#{$prefix}#{$class-name}-#{$name} {
      #{$property}: var(#{$var-name});
    }
  }
}

// ============================================================================
// Generate color utilities from CSS variables
// ============================================================================
// Creates text, background, and border color utilities using CSS custom properties
// Usage:
//   @include generate-color-utilities('primary', '--color-primary');
// Output:
//   .text-primary { color: var(--color-primary); }
//   .bg-primary { background-color: var(--color-primary); }
//   .border-primary { border-color: var(--color-primary); }

@mixin generate-color-utilities($color-name, $var-name) {
  .text-#{$color-name} {
    color: var(#{$var-name});
  }
  .bg-#{$color-name} {
    background-color: var(#{$var-name});
  }
  .border-#{$color-name} {
    border-color: var(#{$var-name});
  }
}

// ============================================================================
// Generate spacing utilities from CSS variables
// ============================================================================
// Creates margin and padding utilities using CSS custom properties
// Usage:
//   @include generate-spacing-utilities('m', 'margin', (
//     1: '--spacing-1',
//     2: '--spacing-2'
//   ));
// Output:
//   .m-1 { margin: var(--spacing-1); }
//   .m-2 { margin: var(--spacing-2); }
//   .mt-1 { margin-top: var(--spacing-1); }
//   etc.

@mixin generate-spacing-utilities($prefix, $property, $var-map) {
  // All sides
  @each $name, $var-name in $var-map {
    .#{$prefix}-#{$name} {
      #{$property}: var(#{$var-name});
    }
  }

  // Individual sides
  $sides: (
    t: top,
    r: right,
    b: bottom,
    l: left
  );

  @each $side-abbr, $side-name in $sides {
    @each $name, $var-name in $var-map {
      .#{$prefix}#{$side-abbr}-#{$name} {
        #{$property}-#{$side-name}: var(#{$var-name});
      }
    }
  }

  // X axis (left and right)
  @each $name, $var-name in $var-map {
    .#{$prefix}x-#{$name} {
      #{$property}-left: var(#{$var-name});
      #{$property}-right: var(#{$var-name});
    }
  }

  // Y axis (top and bottom)
  @each $name, $var-name in $var-map {
    .#{$prefix}y-#{$name} {
      #{$property}-top: var(#{$var-name});
      #{$property}-bottom: var(#{$var-name});
    }
  }
}

// ============================================================================
// Generate responsive utilities from CSS variables
// ============================================================================
// Creates responsive variants of utilities at all breakpoints
// Usage:
//   @include generate-responsive-css-vars('text', 'font-size', (
//     sm: '--font-size-sm',
//     base: '--font-size-base'
//   ));

@mixin generate-responsive-css-vars($class-name, $property, $var-map) {
  @each $bp-name, $bp-value in settings.$breakpoints {
    @media (min-width: $bp-value) {
      @each $name, $var-name in $var-map {
        .#{$bp-name}\:#{$class-name}-#{$name} {
          #{$property}: var(#{$var-name});
        }
      }
    }
  }
}

// ============================================================================
// Generate dark mode utilities from CSS variables
// ============================================================================
// Creates dark mode variants that swap colors automatically
// Usage:
//   @include generate-dark-mode-utilities('primary', '--color-primary');

@mixin generate-dark-mode-utilities($color-name, $var-name) {
  @media (prefers-color-scheme: dark) {
    .dark\:text-#{$color-name} {
      color: var(#{$var-name});
    }
    .dark\:bg-#{$color-name} {
      background-color: var(#{$var-name});
    }
    .dark\:border-#{$color-name} {
      border-color: var(#{$var-name});
    }
  }
}

// ============================================================================
// Generate opacity variants using color-mix()
// ============================================================================
// Creates opacity variants using CSS color-mix() function
// This is more modern than rgba() and works with CSS variables
// Usage:
//   @include generate-opacity-variants('bg-primary', 'var(--color-primary)');

@mixin generate-opacity-variants($class-name, $color-var, $opacities: (0, 5, 10, 20, 25, 30, 40, 50, 60, 70, 75, 80, 90, 95)) {
  @each $opacity in $opacities {
    .#{$class-name}\/#{$opacity} {
      background-color: color-mix(in srgb, #{$color-var} #{$opacity * 1%}, transparent);
    }
  }
}

