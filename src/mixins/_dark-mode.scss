// ============================================================================
// Automatic Dark Mode Mixins
// ============================================================================
// These mixins generate utilities that respond to:
// - System preference: @media (prefers-color-scheme: dark)
// - Manual toggle: [data-theme='dark'] or .dark class on parent
// ============================================================================

@use 'sass:map';
@use 'sass:color';

// ============================================================================
// Primary Dark Mode Mixin
// ============================================================================
// Generates dark mode utilities with consistent specificity (0,1,0)
// Usage (at TOP LEVEL of file):
//   @include dark-mode {
//     .dark\:text-primary { color: var(--color-primary); }
//   }
// Output:
//   @media (prefers-color-scheme: dark) {
//     .dark\:text-primary { color: var(--color-primary); }
//   }
//   [data-theme='dark'] .dark\:text-primary,
//   .dark .dark\:text-primary {
//     color: var(--color-primary);
//   }
// ============================================================================

@mixin dark-mode {
  // Media query for system preference (automatic)
  @media (prefers-color-scheme: dark) {
    @content;
  }

  // Manual toggle via data attribute or class
  // Output wrappers to maintain (0,1,0) specificity
  [data-theme='dark'] {
    @content;
  }
  .dark {
    @content;
  }
}

// Dark mode mixin for use WITHIN other selectors
// Usage:
//   .my-class {
//     color: black;
//     @include dark-mode-self {
//       color: white;
//     }
//   }
// Output:
//   .my-class { color: black; }
//   @media (prefers-color-scheme: dark) {
//     .my-class { color: white; }
//   }
//   [data-theme='dark'] .my-class,
//   .dark .my-class {
//     color: white;
//   }
@mixin dark-mode-self {
  @media (prefers-color-scheme: dark) {
    @content;
  }

  @at-root {
    [data-theme='dark'] #{&},
    .dark #{&} {
      @content;
    }
  }
}

// Light mode mixin
// Usage (at TOP LEVEL):
//   @include light-mode {
//     .light\:text-primary { color: var(--color-primary); }
//   }
@mixin light-mode {
  @media (prefers-color-scheme: light) {
    @content;
  }
}

// Light mode mixin for use WITHIN other selectors
@mixin light-mode-self {
  @media (prefers-color-scheme: light) {
    @content;
  }
}

