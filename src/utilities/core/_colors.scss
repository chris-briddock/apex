// ============================================================================
// Color Utilities (Text, Background, Border)
// ============================================================================
// All colors use CSS custom properties for runtime theming support

@use 'sass:color';
@use '../../config/settings' as settings;
@use '../../mixins/dark-mode' as dark-mode;

@if settings.$enable-colors == true {
  // ============================================================================
  // Gray Colors (CSS Custom Properties for theming)
  // ============================================================================
  $grays: (
    50: var(--color-gray-50),
    100: var(--color-gray-100),
    200: var(--color-gray-200),
    300: var(--color-gray-300),
    400: var(--color-gray-400),
    500: var(--color-gray-500),
    600: var(--color-gray-600),
    700: var(--color-gray-700),
    800: var(--color-gray-800),
    900: var(--color-gray-900),
  );

  // Text colors
  @each $key, $value in $grays {
    .text-gray-#{$key} {
      color: $value;
    }
  }

  // Background colors
  @each $key, $value in $grays {
    .bg-gray-#{$key} {
      background-color: $value;
    }
  }

  // Border colors
  @each $key, $value in $grays {
    .border-gray-#{$key} {
      border-color: $value;
    }
  }

  // ============================================================================
  // Blue Colors (CSS Custom Properties)
  // ============================================================================
  $blues: (
    50: var(--color-blue-50),
    100: var(--color-blue-100),
    200: var(--color-blue-200),
    300: var(--color-blue-300),
    400: var(--color-blue-400),
    500: var(--color-blue-500),
    600: var(--color-blue-600),
    700: var(--color-blue-700),
    800: var(--color-blue-800),
    900: var(--color-blue-900),
  );

  @each $key, $value in $blues {
    .text-blue-#{$key} {
      color: $value;
    }
    .bg-blue-#{$key} {
      background-color: $value;
    }
    .border-blue-#{$key} {
      border-color: $value;
    }
  }

  // ============================================================================
  // Green Colors (CSS Custom Properties)
  // ============================================================================
  $greens: (
    50: var(--color-green-50),
    100: var(--color-green-100),
    200: var(--color-green-200),
    300: var(--color-green-300),
    400: var(--color-green-400),
    500: var(--color-green-500),
    600: var(--color-green-600),
    700: var(--color-green-700),
    800: var(--color-green-800),
    900: var(--color-green-900),
  );

  @each $key, $value in $greens {
    .text-green-#{$key} {
      color: $value;
    }
    .bg-green-#{$key} {
      background-color: $value;
    }
    .border-green-#{$key} {
      border-color: $value;
    }
  }

  // ============================================================================
  // Red Colors (CSS Custom Properties)
  // ============================================================================
  $reds: (
    50: var(--color-red-50),
    100: var(--color-red-100),
    200: var(--color-red-200),
    300: var(--color-red-300),
    400: var(--color-red-400),
    500: var(--color-red-500),
    600: var(--color-red-600),
    700: var(--color-red-700),
    800: var(--color-red-800),
    900: var(--color-red-900),
  );

  @each $key, $value in $reds {
    .text-red-#{$key} {
      color: $value;
    }
    .bg-red-#{$key} {
      background-color: $value;
    }
    .border-red-#{$key} {
      border-color: $value;
    }
  }

  // ============================================================================
  // Yellow Colors (CSS Custom Properties)
  // ============================================================================
  $yellows: (
    50: var(--color-yellow-50),
    100: var(--color-yellow-100),
    200: var(--color-yellow-200),
    300: var(--color-yellow-300),
    400: var(--color-yellow-400),
    500: var(--color-yellow-500),
    600: var(--color-yellow-600),
    700: var(--color-yellow-700),
    800: var(--color-yellow-800),
    900: var(--color-yellow-900),
  );

  @each $key, $value in $yellows {
    .text-yellow-#{$key} {
      color: $value;
    }
    .bg-yellow-#{$key} {
      background-color: $value;
    }
    .border-yellow-#{$key} {
      border-color: $value;
    }
  }

  // ============================================================================
  // Purple Colors (CSS Custom Properties)
  // ============================================================================
  $purples: (
    50: var(--color-purple-50),
    100: var(--color-purple-100),
    200: var(--color-purple-200),
    300: var(--color-purple-300),
    400: var(--color-purple-400),
    500: var(--color-purple-500),
    600: var(--color-purple-600),
    700: var(--color-purple-700),
    800: var(--color-purple-800),
    900: var(--color-purple-900),
  );

  @each $key, $value in $purples {
    .text-purple-#{$key} {
      color: $value;
    }
    .bg-purple-#{$key} {
      background-color: $value;
    }
    .border-purple-#{$key} {
      border-color: $value;
    }
  }

  // ============================================================================
  // Semantic Colors (CSS Custom Properties)
  // ============================================================================
  .text-primary { color: var(--color-primary); }
  .text-secondary { color: var(--color-secondary); }
  .text-success { color: var(--color-success); }
  .text-danger { color: var(--color-danger); }
  .text-warning { color: var(--color-warning); }
  .text-info { color: var(--color-info); }
  .text-light { color: var(--color-light); }
  .text-dark { color: var(--color-dark); }
  .text-white { color: var(--color-white); }
  .text-black { color: var(--color-black); }
  .text-transparent { color: var(--color-transparent); }
  .text-current { color: var(--color-current); }
  .text-error { color: var(--color-error); }

  .bg-primary { background-color: var(--color-primary); }
  .bg-secondary { background-color: var(--color-secondary); }
  .bg-success { background-color: var(--color-success); }
  .bg-danger { background-color: var(--color-danger); }
  .bg-warning { background-color: var(--color-warning); }
  .bg-info { background-color: var(--color-info); }
  .bg-light { background-color: var(--color-light); }
  .bg-dark { background-color: var(--color-dark); }
  .bg-white { background-color: var(--color-white); }
  .bg-black { background-color: var(--color-black); }
  .bg-transparent { background-color: var(--color-transparent); }
  .bg-current { background-color: var(--color-current); }
  .bg-error { background-color: var(--color-error); }

  .border-primary { border-color: var(--color-primary); }
  .border-secondary { border-color: var(--color-secondary); }
  .border-success { border-color: var(--color-success); }
  .border-danger { border-color: var(--color-danger); }
  .border-warning { border-color: var(--color-warning); }
  .border-info { border-color: var(--color-info); }
  .border-light { border-color: var(--color-light); }
  .border-dark { border-color: var(--color-dark); }
  .border-white { border-color: var(--color-white); }
  .border-black { border-color: var(--color-black); }
  .border-transparent { border-color: var(--color-transparent); }
  .border-current { border-color: var(--color-current); }
  .border-error { border-color: var(--color-error); }

  // ============================================================================
  // Opacity Variants (for backgrounds with CSS variables)
  // ============================================================================
  // Opacity values using CSS custom properties
  $opacity-values: (
    0: var(--apex-opacity-0),
    5: var(--apex-opacity-5),
    10: var(--apex-opacity-10),
    15: var(--apex-opacity-15),
    20: var(--apex-opacity-20),
    25: var(--apex-opacity-25),
    30: var(--apex-opacity-30),
    35: var(--apex-opacity-35),
    40: var(--apex-opacity-40),
    45: var(--apex-opacity-45),
    50: var(--apex-opacity-50),
    55: var(--apex-opacity-55),
    60: var(--apex-opacity-60),
    65: var(--apex-opacity-65),
    70: var(--apex-opacity-70),
    75: var(--apex-opacity-75),
    80: var(--apex-opacity-80),
    85: var(--apex-opacity-85),
    90: var(--apex-opacity-90),
    95: var(--apex-opacity-95),
    100: var(--apex-opacity-100)
  );

  // CSS variable-based opacity backgrounds for semantic colors
  @each $opacity-name, $opacity-value in $opacity-values {
    @if $opacity-name != 100 {
      .bg-primary\/#{$opacity-name} {
        background-color: color-mix(in srgb, var(--color-primary) #{$opacity-name * 1%}, transparent);
      }
      .bg-secondary\/#{$opacity-name} {
        background-color: color-mix(in srgb, var(--color-secondary) #{$opacity-name * 1%}, transparent);
      }
      .bg-success\/#{$opacity-name} {
        background-color: color-mix(in srgb, var(--color-success) #{$opacity-name * 1%}, transparent);
      }
      .bg-danger\/#{$opacity-name} {
        background-color: color-mix(in srgb, var(--color-danger) #{$opacity-name * 1%}, transparent);
      }
      .bg-warning\/#{$opacity-name} {
        background-color: color-mix(in srgb, var(--color-warning) #{$opacity-name * 1%}, transparent);
      }
      .bg-info\/#{$opacity-name} {
        background-color: color-mix(in srgb, var(--color-info) #{$opacity-name * 1%}, transparent);
      }
      .bg-error\/#{$opacity-name} {
        background-color: color-mix(in srgb, var(--color-error) #{$opacity-name * 1%}, transparent);
      }
      .bg-white\/#{$opacity-name} {
        background-color: color-mix(in srgb, var(--color-white) #{$opacity-name * 1%}, transparent);
      }
      .bg-black\/#{$opacity-name} {
        background-color: color-mix(in srgb, var(--color-black) #{$opacity-name * 1%}, transparent);
      }

      // Gray opacity variants using color-mix
      @each $shade in (50, 100, 200, 300, 400, 500, 600, 700, 800, 900) {
        .bg-gray-#{$shade}\/#{$opacity-name} {
          background-color: color-mix(in srgb, var(--color-gray-#{$shade}) #{$opacity-name * 1%}, transparent);
        }
      }
    }
  }

  // ============================================================================
  // AUTOMATIC DARK MODE UTILITIES
  // ============================================================================
  @if settings.$enable-dark-mode == true {

    // ============================================================================
    // Dark Mode Gray Colors (using CSS custom properties)
    // ============================================================================
    // In dark mode, grays automatically swap via CSS variable redefinition
    // No need to redefine - the CSS variables in _dark.scss handle it

    // Dark mode text colors (gray scale) - using CSS variables
    @each $key in (50, 100, 200, 300, 400, 500, 600, 700, 800, 900) {
      // Dark mode via media query (system preference)
      @media (prefers-color-scheme: dark) {
        .dark\:text-gray-#{$key} {
          color: var(--color-gray-#{$key});
        }
      }
      // Dark mode via data-theme="dark" attribute (manual toggle)
      [data-theme="dark"] .dark\:text-gray-#{$key} {
        color: var(--color-gray-#{$key});
      }
    }

    // Dark mode background colors (gray scale)
    @each $key in (50, 100, 200, 300, 400, 500, 600, 700, 800, 900) {
      @media (prefers-color-scheme: dark) {
        .dark\:bg-gray-#{$key} {
          background-color: var(--color-gray-#{$key});
        }
      }
      [data-theme="dark"] .dark\:bg-gray-#{$key} {
        background-color: var(--color-gray-#{$key});
      }
    }

    // Dark mode border colors (gray scale)
    @each $key in (50, 100, 200, 300, 400, 500, 600, 700, 800, 900) {
      @media (prefers-color-scheme: dark) {
        .dark\:border-gray-#{$key} {
          border-color: var(--color-gray-#{$key});
        }
      }
      [data-theme="dark"] .dark\:border-gray-#{$key} {
        border-color: var(--color-gray-#{$key});
      }
    }

    // Dark mode semantic colors
    @each $color in (primary, secondary, success, danger, error, warning, info, light, dark) {
      @media (prefers-color-scheme: dark) {
        .dark\:text-#{$color} { color: var(--color-#{$color}); }
        .dark\:bg-#{$color} { background-color: var(--color-#{$color}); }
        .dark\:border-#{$color} { border-color: var(--color-#{$color}); }
      }
      [data-theme="dark"] .dark\:text-#{$color} { color: var(--color-#{$color}); }
      [data-theme="dark"] .dark\:bg-#{$color} { background-color: var(--color-#{$color}); }
      [data-theme="dark"] .dark\:border-#{$color} { border-color: var(--color-#{$color}); }
    }

    // Dark mode white/black (swapped in dark mode)
    @media (prefers-color-scheme: dark) {
      .dark\:text-white { color: var(--color-black); }
      .dark\:text-black { color: var(--color-white); }
      .dark\:bg-white { background-color: var(--color-black); }
      .dark\:bg-black { background-color: var(--color-white); }
    }
    [data-theme="dark"] .dark\:text-white { color: var(--color-black); }
    [data-theme="dark"] .dark\:text-black { color: var(--color-white); }
    [data-theme="dark"] .dark\:bg-white { background-color: var(--color-black); }
    [data-theme="dark"] .dark\:bg-black { background-color: var(--color-white); }

    // ============================================================================
    // Dark Mode Extended Color Scales (Blue, Green, Red, Yellow, Purple)
    // Using CSS variables - they automatically adjust in dark mode
    // ============================================================================
    @each $color-family in ('blue', 'green', 'red', 'yellow', 'purple') {
      @each $key in (50, 100, 200, 300, 400, 500, 600, 700, 800, 900) {
        @media (prefers-color-scheme: dark) {
          .dark\:text-#{$color-family}-#{$key} { color: var(--color-#{$color-family}-#{$key}); }
          .dark\:bg-#{$color-family}-#{$key} { background-color: var(--color-#{$color-family}-#{$key}); }
          .dark\:border-#{$color-family}-#{$key} { border-color: var(--color-#{$color-family}-#{$key}); }
        }
        [data-theme="dark"] .dark\:text-#{$color-family}-#{$key} { color: var(--color-#{$color-family}-#{$key}); }
        [data-theme="dark"] .dark\:bg-#{$color-family}-#{$key} { background-color: var(--color-#{$color-family}-#{$key}); }
        [data-theme="dark"] .dark\:border-#{$color-family}-#{$key} { border-color: var(--color-#{$color-family}-#{$key}); }
      }
    }

    // ============================================================================
    // Dark Mode Hover States (using CSS variables)
    // ============================================================================
    @each $shade in (50, 100, 200, 300, 400, 500, 600, 700, 800, 900) {
      // Base hover state
      .dark\:hover\:bg-gray-#{$shade}:hover {
        background-color: var(--color-gray-#{$shade});
      }
      // Media query hover
      @media (prefers-color-scheme: dark) {
        .dark\:hover\:bg-gray-#{$shade}:hover {
          background-color: var(--color-gray-#{$shade});
        }
      }
      // data-theme="dark" hover
      [data-theme="dark"] .dark\:hover\:bg-gray-#{$shade}:hover {
        background-color: var(--color-gray-#{$shade});
      }

      // Opacity hover variants using color-mix
      @each $opacity-name in (0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95) {
        .dark\:hover\:bg-gray-#{$shade}\/#{$opacity-name}:hover {
          background-color: color-mix(in srgb, var(--color-gray-#{$shade}) #{$opacity-name * 1%}, transparent);
        }
        @media (prefers-color-scheme: dark) {
          .dark\:hover\:bg-gray-#{$shade}\/#{$opacity-name}:hover {
            background-color: color-mix(in srgb, var(--color-gray-#{$shade}) #{$opacity-name * 1%}, transparent);
          }
        }
        [data-theme="dark"] .dark\:hover\:bg-gray-#{$shade}\/#{$opacity-name}:hover {
          background-color: color-mix(in srgb, var(--color-gray-#{$shade}) #{$opacity-name * 1%}, transparent);
        }
      }
    }

    // Semantic color hover states
    @each $color in (primary, secondary, success, danger, error, warning, info) {
      .dark\:hover\:bg-#{$color}:hover {
        background-color: var(--color-#{$color});
      }
      @media (prefers-color-scheme: dark) {
        .dark\:hover\:bg-#{$color}:hover {
          background-color: var(--color-#{$color});
        }
      }
      [data-theme="dark"] .dark\:hover\:bg-#{$color}:hover {
        background-color: var(--color-#{$color});
      }
    }
  }
}
