// ============================================================================
// Visibility Utilities
// ============================================================================

@use 'sass:map';
@use 'sass:string';
@use '../../config/settings' as settings;
@use '../../config/breakpoints' as bp;
@use '../../mixins/responsive' as responsive;

@if settings.$enable-visibility == true {
  // Visibility values map
  $visibility-values: (
    visible: visible,
    invisible: hidden,
    collapse: collapse
  );

  // Base visibility utilities
  @each $name, $value in $visibility-values {
    .#{$name} {
      visibility: $value;
    }
  }

  // Responsive visibility utilities
  @each $breakpoint, $breakpoint-value in bp.$breakpoints {
    $prefix: map.get(bp.$breakpoint-prefixes, $breakpoint);

    @include responsive.respond-above($breakpoint) {
      @each $name, $value in $visibility-values {
        // Escape class names that start with a number
        $escaped-prefix: $prefix;
        @if string.slice($prefix, 1, 1) == '2' {
          $escaped-prefix: '\\32' + string.slice($prefix, 2);
        }

        .#{$escaped-prefix}\:#{$name} {
          visibility: $value;
        }
      }
    }
  }

  // Print visibility utilities
  @media print {
    .no-print,
    .print\:hidden {
      display: none !important;
    }
  }
}
